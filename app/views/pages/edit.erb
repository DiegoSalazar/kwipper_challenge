<h1>Edit Page</h1>

<form action="/pages/<%= @page.id %>/update" method="post">
  <div class="col-sm-3">
    <div class="form-group">
      <label>Title</label>
      <input type="text" name="page[title]" class="form-control" value="<%= @page.title %>" required>
    </div>

    <div class="form-group">
      <label>Parent page</label>
      <select name="page[parent_id]" class="form-control">
        <option>None</option>
        
        <% Page.all.each do |page| %>
          <option <%= " selected=\"selected\"" if @page.is_parent? page %> value="<%= page.id %>">
            <%= page.title %>
          </option>
        <% end %>
      </select>
    </div>

    <div class="form-group">
      <label>Slug</label>
      <input type="text" format="[a-z-?]" name="page[slug]" class="form-control" value="<%= @page.slug %>" pattern="^[a-z\d]+(-[a-z\d]+)*$" required>
    </div>

    <div class="form-group">
      <label>Position</label>
      <input type="number" name="page[position]" class="form-control" value="<%= @page.position %>">
    </div>
  </div>

  <div class="col-sm-9">
    <div class="form-group">
      <label>Markdown</label>
      <textarea name="page[raw_body]" class="form-control" rows="23" required><%= @page.raw_body.strip %></textarea>
    </div>

    <div class="form-group">
      <input type="submit" value="Update" class="btn btn-primary">
      <a href="/pages" class="btn btn-default">Cancel</a>
    </div>
  </div>
</form>