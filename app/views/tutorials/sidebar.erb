<ul class="nav nav-stacked nav-pills">
  <% @pages.each do |page| %>
    <li role="presentation" class="<%= "active" if page.slug == params["slug"] %>">
      <a href="<%= page.slug_path %>">
        <%= page.title %>
      </a>

      <% if page.current?(params["slug"]) && !page.sub_pages.empty? %>
        <ul class="nav nav-stacked nav-pills">
          <% PageDecorator.wrap(page.sub_pages).each do |sub_page| %>
            <li class="<%= "active" if sub_page.current? params["slug"] %>">
              <a href="<%= sub_page.slug_path %>">
                <%= sub_page.title %>
              </a>
            </li>
          <% end %>
        </ul>
      <% end %>
    </li>
  <% end %>
</ul>

<hr>

<a href="/pages/new" class="btn btn-primary">
  <span class="fa fa-plus-square"></span>
  New Page
</a>